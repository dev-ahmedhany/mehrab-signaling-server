# TURN server configuration for Mehrab

# Network settings
listening-port=3478
tls-listening-port=5349

# External IP (replace with your server's public IP or use external-ip)
# external-ip=YOUR_PUBLIC_IP

# Relay address range
min-port=49152
max-port=65535

# Realm - use your domain
realm=ahmedhany.dev

# Authentication
# Use static auth secret for time-limited credentials
use-auth-secret
static-auth-secret=${TURN_SECRET}

# TLS/DTLS certificates (replace with actual paths)
# cert=/etc/coturn/certs/fullchain.pem
# pkey=/etc/coturn/certs/privkey.pem

# Logging
log-file=stdout
verbose

# Security settings
no-multicast-peers

# Block private IP ranges (RFC 1918)
denied-peer-ip=10.0.0.0-10.255.255.255
denied-peer-ip=172.16.0.0-172.31.255.255
denied-peer-ip=192.168.0.0-192.168.255.255

# Block loopback
denied-peer-ip=127.0.0.0-127.255.255.255

# Block link-local
denied-peer-ip=169.254.0.0-169.254.255.255

# Enable fingerprints for better compatibility
fingerprint

# Enable long-term credentials mechanism
lt-cred-mech

# Max bandwidth per session (bytes/second) - 1 Mbps
# max-bps=1000000

# Total relay bandwidth (bytes/second) - 100 Mbps
# total-quota=100000000

# User quota (sessions per user)
user-quota=10

# Stale nonce lifetime (seconds)
stale-nonce=600

# No CLI (disable admin interface)
no-cli
